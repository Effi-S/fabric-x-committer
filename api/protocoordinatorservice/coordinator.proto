syntax = "proto3";

option go_package = "github.ibm.com/decentralized-trust-research/scalable-committer/api/protocoordinatorservice";

package protocoordinatorservice;

import "api/protoblocktx/block_tx.proto";
import "api/protosigverifierservice/verifier.proto";

service Coordinator {
    rpc SetMetaNamespaceVerificationKey(protosigverifierservice.Key) returns (Empty);
    rpc BlockProcessing(stream protoblocktx.Block) returns (stream TxValidationStatusBatch);
    rpc SetLastCommittedBlockNumber (protoblocktx.BlockInfo) returns (Empty) {}
    rpc GetLastCommittedBlockNumber (Empty) returns (protoblocktx.BlockInfo) {}
    rpc GetNextExpectedBlockNumber (Empty) returns (protoblocktx.BlockInfo) {}
}

message Empty {
}

message TxValidationStatusBatch {
    repeated TxValidationStatus txs_validation_status = 1;
}

message TxValidationStatus {
    string tx_id = 1;
    protoblocktx.Status status = 2;
}
